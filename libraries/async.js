/*!
 * async
 * 0.9.0
 * https://github.com/caolan/async
 */
(function(){function r(e){var n=false;return function(){if(n)throw new Error("Callback was already called.");n=true;e.apply(t,arguments)}}var e={};var t,n;t=this;if(t!=null){n=t.async}e.noConflict=function(){t.async=n;return e};var i=Object.prototype.toString;var s=Array.isArray||function(e){return i.call(e)==="[object Array]"};var o=function(e,t){if(e.forEach){return e.forEach(t)}for(var n=0;n<e.length;n+=1){t(e[n],n,e)}};var u=function(e,t){if(e.map){return e.map(t)}var n=[];o(e,function(e,r,i){n.push(t(e,r,i))});return n};var a=function(e,t,n){if(e.reduce){return e.reduce(t,n)}o(e,function(e,r,i){n=t(n,e,r,i)});return n};var f=function(e){if(Object.keys){return Object.keys(e)}var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};if(typeof process==="undefined"||!process.nextTick){if(typeof setImmediate==="function"){e.nextTick=function(e){setImmediate(e)};e.setImmediate=e.nextTick}else{e.nextTick=function(e){setTimeout(e,0)};e.setImmediate=e.nextTick}}else{e.nextTick=process.nextTick;if(typeof setImmediate!=="undefined"){e.setImmediate=function(e){setImmediate(e)}}else{e.setImmediate=e.nextTick}}e.each=function(e,t,n){function s(t){if(t){n(t);n=function(){}}else{i+=1;if(i>=e.length){n()}}}n=n||function(){};if(!e.length){return n()}var i=0;o(e,function(e){t(e,r(s))})};e.forEach=e.each;e.eachSeries=function(e,t,n){n=n||function(){};if(!e.length){return n()}var r=0;var i=function(){t(e[r],function(t){if(t){n(t);n=function(){}}else{r+=1;if(r>=e.length){n()}else{i()}}})};i()};e.forEachSeries=e.eachSeries;e.eachLimit=function(e,t,n,r){var i=l(t);i.apply(null,[e,n,r])};e.forEachLimit=e.eachLimit;var l=function(e){return function(t,n,r){r=r||function(){};if(!t.length||e<=0){return r()}var i=0;var s=0;var o=0;(function u(){if(i>=t.length){return r()}while(o<e&&s<t.length){s+=1;o+=1;n(t[s-1],function(e){if(e){r(e);r=function(){}}else{i+=1;o-=1;if(i>=t.length){r()}else{u()}}})}})()}};var c=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.each].concat(n))}};var h=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(n))}};var p=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.eachSeries].concat(n))}};var d=function(e,t,n,r){t=u(t,function(e,t){return{index:t,value:e}});if(!r){e(t,function(e,t){n(e.value,function(e){t(e)})})}else{var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r;t(n)})},function(e){r(e,i)})}};e.map=c(d);e.mapSeries=p(d);e.mapLimit=function(e,t,n,r){return v(t)(e,n,r)};var v=function(e){return h(e,d)};e.reduce=function(t,n,r,i){e.eachSeries(t,function(e,t){r(n,e,function(e,r){n=r;t(e)})},function(e){i(e,n)})};e.inject=e.reduce;e.foldl=e.reduce;e.reduceRight=function(t,n,r,i){var s=u(t,function(e){return e}).reverse();e.reduce(s,n,r,i)};e.foldr=e.reduceRight;var m=function(e,t,n,r){var i=[];t=u(t,function(e,t){return{index:t,value:e}});e(t,function(e,t){n(e.value,function(n){if(n){i.push(e)}t()})},function(e){r(u(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=c(m);e.filterSeries=p(m);e.select=e.filter;e.selectSeries=e.filterSeries;var g=function(e,t,n,r){var i=[];t=u(t,function(e,t){return{index:t,value:e}});e(t,function(e,t){n(e.value,function(n){if(!n){i.push(e)}t()})},function(e){r(u(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=c(g);e.rejectSeries=p(g);var y=function(e,t,n,r){e(t,function(e,t){n(e,function(n){if(n){r(e);r=function(){}}else{t()}})},function(e){r()})};e.detect=c(y);e.detectSeries=p(y);e.some=function(t,n,r){e.each(t,function(e,t){n(e,function(e){if(e){r(true);r=function(){}}t()})},function(e){r(false)})};e.any=e.some;e.every=function(t,n,r){e.each(t,function(e,t){n(e,function(e){if(!e){r(false);r=function(){}}t()})},function(e){r(true)})};e.all=e.every;e.sortBy=function(t,n,r){e.map(t,function(e,t){n(e,function(n,r){if(n){t(n)}else{t(null,{value:e,criteria:r})}})},function(e,t){if(e){return r(e)}else{var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,u(t.sort(n),function(e){return e.value}))}})};e.auto=function(t,n){n=n||function(){};var r=f(t);var i=r.length;if(!i){return n()}var u={};var l=[];var c=function(e){l.unshift(e)};var h=function(e){for(var t=0;t<l.length;t+=1){if(l[t]===e){l.splice(t,1);return}}};var p=function(){i--;o(l.slice(0),function(e){e()})};c(function(){if(!i){var e=n;n=function(){};e(null,u)}});o(r,function(r){var i=s(t[r])?t[r]:[t[r]];var l=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1){i=i[0]}if(t){var s={};o(f(u),function(e){s[e]=u[e]});s[r]=i;n(t,s);n=function(){}}else{u[r]=i;e.setImmediate(p)}};var d=i.slice(0,Math.abs(i.length-1))||[];var v=function(){return a(d,function(e,t){return e&&u.hasOwnProperty(t)},true)&&!u.hasOwnProperty(r)};if(v()){i[i.length-1](l,u)}else{var m=function(){if(v()){h(m);i[i.length-1](l,u)}};c(m)}})};e.retry=function(t,n,r){var i=5;var s=[];if(typeof t==="function"){r=n;n=t;t=i}t=parseInt(t,10)||i;var o=function(i,o){var u=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},o)}};while(t){s.push(u(n,!(t-=1)))}e.series(s,function(e,t){t=t[t.length-1];(i||r)(t.err,t.result)})};return r?o():o};e.waterfall=function(t,n){n=n||function(){};if(!s(t)){var r=new Error("First argument to waterfall must be an array of functions");return n(r)}if(!t.length){return n()}var i=function(t){return function(r){if(r){n.apply(null,arguments);n=function(){}}else{var s=Array.prototype.slice.call(arguments,1);var o=t.next();if(o){s.push(i(o))}else{s.push(n)}e.setImmediate(function(){t.apply(null,s)})}}};i(e.iterator(t))()};var b=function(e,t,n){n=n||function(){};if(s(t)){e.map(t,function(e,t){if(e){e(function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1){n=n[0]}t.call(null,e,n)})}},n)}else{var r={};e.each(f(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1){i=i[0]}r[e]=i;n(t)})},function(e){n(e,r)})}};e.parallel=function(t,n){b({map:e.map,each:e.each},t,n)};e.parallelLimit=function(e,t,n){b({map:v(t),each:l(t)},e,n)};e.series=function(t,n){n=n||function(){};if(s(t)){e.mapSeries(t,function(e,t){if(e){e(function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1){n=n[0]}t.call(null,e,n)})}},n)}else{var r={};e.eachSeries(f(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1){i=i[0]}r[e]=i;n(t)})},function(e){n(e,r)})}};e.iterator=function(e){var t=function(n){var r=function(){if(e.length){e[n].apply(null,arguments)}return r.next()};r.next=function(){return n<e.length-1?t(n+1):null};return r};return t(0)};e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]);t(e)})},function(e){r(e,i)})};e.concat=c(w);e.concatSeries=p(w);e.whilst=function(t,n,r){if(t()){n(function(i){if(i){return r(i)}e.whilst(t,n,r)})}else{r()}};e.doWhilst=function(t,n,r){t(function(i){if(i){return r(i)}var s=Array.prototype.slice.call(arguments,1);if(n.apply(null,s)){e.doWhilst(t,n,r)}else{r()}})};e.until=function(t,n,r){if(!t()){n(function(i){if(i){return r(i)}e.until(t,n,r)})}else{r()}};e.doUntil=function(t,n,r){t(function(i){if(i){return r(i)}var s=Array.prototype.slice.call(arguments,1);if(!n.apply(null,s)){e.doUntil(t,n,r)}else{r()}})};e.queue=function(t,n){function i(t,n,r,i){if(!t.started){t.started=true}if(!s(n)){n=[n]}if(n.length==0){return e.setImmediate(function(){if(t.drain){t.drain()}})}o(n,function(n){var s={data:n,callback:typeof i==="function"?i:null};if(r){t.tasks.unshift(s)}else{t.tasks.push(s)}if(t.saturated&&t.tasks.length===t.concurrency){t.saturated()}e.setImmediate(t.process)})}if(n===undefined){n=1}var u=0;var a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(e,t){i(a,e,false,t)},kill:function(){a.drain=null;a.tasks=[]},unshift:function(e,t){i(a,e,true,t)},process:function(){if(!a.paused&&u<a.concurrency&&a.tasks.length){var e=a.tasks.shift();if(a.empty&&a.tasks.length===0){a.empty()}u+=1;var n=function(){u-=1;if(e.callback){e.callback.apply(e,arguments)}if(a.drain&&a.tasks.length+u===0){a.drain()}a.process()};var i=r(n);t(e.data,i)}},length:function(){return a.tasks.length},running:function(){return u},idle:function(){return a.tasks.length+u===0},pause:function(){if(a.paused===true){return}a.paused=true;a.process()},resume:function(){if(a.paused===false){return}a.paused=false;a.process()}};return a};e.priorityQueue=function(t,n){function r(e,t){return e.priority-t.priority}function i(e,t,n){var r=-1,i=e.length-1;while(r<i){var s=r+(i-r+1>>>1);if(n(t,e[s])>=0){r=s}else{i=s-1}}return r}function u(t,n,u,a){if(!t.started){t.started=true}if(!s(n)){n=[n]}if(n.length==0){return e.setImmediate(function(){if(t.drain){t.drain()}})}o(n,function(n){var s={data:n,priority:u,callback:typeof a==="function"?a:null};t.tasks.splice(i(t.tasks,s,r)+1,0,s);if(t.saturated&&t.tasks.length===t.concurrency){t.saturated()}e.setImmediate(t.process)})}var a=e.queue(t,n);a.push=function(e,t,n){u(a,e,t,n)};delete a.unshift;return a};e.cargo=function(t,n){var r=false,i=[];var a={tasks:i,payload:n,saturated:null,empty:null,drain:null,drained:true,push:function(t,r){if(!s(t)){t=[t]}o(t,function(e){i.push({data:e,callback:typeof r==="function"?r:null});a.drained=false;if(a.saturated&&i.length===n){a.saturated()}});e.setImmediate(a.process)},process:function f(){if(r)return;if(i.length===0){if(a.drain&&!a.drained)a.drain();a.drained=true;return}var e=typeof n==="number"?i.splice(0,n):i.splice(0,i.length);var s=u(e,function(e){return e.data});if(a.empty)a.empty();r=true;t(s,function(){r=false;var t=arguments;o(e,function(e){if(e.callback){e.callback.apply(null,t)}});f()})},length:function(){return i.length},running:function(){return r}};return a};var E=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(t){if(console.error){console.error(t)}}else if(console[e]){o(n,function(t){console[e](t)})}}}]))}};e.log=E("log");e.dir=E("dir");e.memoize=function(t,n){var r={};var i={};n=n||function(e){return e};var s=function(){var s=Array.prototype.slice.call(arguments);var o=s.pop();var u=n.apply(null,s);if(u in r){e.nextTick(function(){o.apply(null,r[u])})}else if(u in i){i[u].push(o)}else{i[u]=[o];t.apply(null,s.concat([function(){r[u]=arguments;var e=i[u];delete i[u];for(var t=0,n=e.length;t<n;t++){e[t].apply(null,arguments)}}]))}};s.memo=r;s.unmemoized=t;return s};e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}};e.times=function(t,n,r){var i=[];for(var s=0;s<t;s++){i.push(s)}return e.map(i,n,r)};e.timesSeries=function(t,n,r){var i=[];for(var s=0;s<t;s++){i.push(s)}return e.mapSeries(i,n,r)};e.seq=function(){var t=arguments;return function(){var n=this;var r=Array.prototype.slice.call(arguments);var i=r.pop();e.reduce(t,r,function(e,t,r){t.apply(n,e.concat([function(){var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}};e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(e,t){var n=function(){var n=this;var r=Array.prototype.slice.call(arguments);var i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}else{return n}};e.applyEach=c(S);e.applyEachSeries=p(S);e.forever=function(e,t){function n(r){if(r){if(t){return t(r)}throw r}e(n)}n()};if(typeof module!=="undefined"&&module.exports){module.exports=e}else if(typeof define!=="undefined"&&define.amd){define([],function(){return e})}else{t.async=e}})()